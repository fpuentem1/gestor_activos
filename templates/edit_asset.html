{% extends "base.html" %}
{% block title %}Editar Activo{% endblock %}

{% block content %}
<h2>Editar Activo</h2>

<form method="post" action="{{ url_for('edit_asset', id=asset['id']) }}">
  <!-- Campos estáticos -->
  <div class="form-group">
    <label for="asset_name">Nombre del Activo:</label>
    <input type="text"
           class="form-control"
           id="asset_name"
           name="asset_name"
           value="{{ asset['asset_name'] }}"
           required>
  </div>

  <div class="form-group">
    <label for="location">Ubicación:</label>
    <input type="text"
           class="form-control"
           id="location"
           name="location"
           value="{{ asset['location'] or '' }}">
  </div>

  <div class="form-group">
    <label for="date_acquired">Fecha de Adquisición:</label>
    <input type="date"
           class="form-control"
           id="date_acquired"
           name="date_acquired"
           value="{{ asset['date_acquired'] or '' }}">
  </div>

  <!-- Campos dinámicos del último mes -->
  <div class="form-row">
    <div class="form-group col-md-4">
      <label for="month">Mes:</label>
      <input type="month"
             class="form-control"
             id="month"
             name="month"
             value="{{ asset['month'] or '' }}">
    </div>
    <div class="form-group col-md-4">
      <label for="amount">Monto:</label>
      <input type="number"
             step="any"
             class="form-control"
             id="amount"
             name="amount"
             value="{{ asset['amount'] or 0 }}">
    </div>
    <div class="form-group col-md-4">
      <label for="currency">Moneda:</label>
      <select class="form-control" id="currency" name="currency">
        <option value="USD" {% if asset['currency']=='USD' %}selected{% endif %}>USD</option>
        <option value="MXN" {% if asset['currency']=='MXN' %}selected{% endif %}>MXN</option>
      </select>
    </div>
  </div>

  <!-- Dropdowns de clases, subclases y estatus -->
  <div class="form-row">
    <div class="form-group col-md-4">
      <label for="class_id">Clase:</label>
      <select class="form-control" id="class_id" name="class_id">
        {% for c in classes %}
        <option value="{{ c['id'] }}"
          {% if c['id']==asset['class_id'] %}selected{% endif %}>
          {{ c['name'] }}
        </option>
        {% endfor %}
      </select>
    </div>

    <div class="form-group col-md-4">
      <label for="subclass_id">Subclase:</label>
      <select class="form-control" id="subclass_id" name="subclass_id">
        {% for sc in subclasses %}
        <option value="{{ sc['id'] }}"
          {% if sc['id']==asset['subclass_id'] %}selected{% endif %}>
          {{ sc['name'] }}
        </option>
        {% endfor %}
      </select>
    </div>

    <div class="form-group col-md-4">
      <label for="estado">Estatus:</label>
      <select class="form-control" id="estado" name="estado">
        {% for st in statuses %}
        <option value="{{ st['id'] }}"
          {% if st['name']==asset['estado'] %}selected{% endif %}>
          {{ st['name'] }}
        </option>
        {% endfor %}
      </select>
    </div>
  </div>

  <div class="form-group">
    <label for="observaciones">Observaciones:</label>
    <textarea class="form-control"
              id="observaciones"
              name="observaciones"
              rows="3">{{ asset['observations'] or '' }}</textarea>
  </div>

  <button type="submit" class="btn btn-success">Guardar Cambios</button>
  <a href="{{ url_for('assets_list') }}" class="btn btn-secondary">Cancelar</a>
</form>
{% endblock %}